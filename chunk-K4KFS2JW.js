import{a as N}from"./chunk-VUVGIWZW.js";import{a as B}from"./chunk-ONN25KGN.js";import"./chunk-4DB2YMOA.js";import{f as y}from"./chunk-W32H2YVA.js";import{$ as v,$a as D,Aa as f,Ea as R,Ia as u,Kb as M,Qa as I,Sa as E,Ta as x,Va as b,Vb as P,Wa as h,Wb as k,Xa as t,Ya as a,Z as T,Za as _,Zb as F,_ as w,_a as A,aa as C,ab as c,c as O,gb as o,hb as p,ib as m,jb as g,rb as l,sb as d,wa as n}from"./chunk-CW4A2IZA.js";var L=(i,s)=>s.id;function j(i,s){i&1&&(t(0,"div",7),_(1,"div",10)(2,"div",10)(3,"div",10),a())}function G(i,s){i&1&&(t(0,"div",8)(1,"div",11),v(),t(2,"svg",12),_(3,"path",13),a()(),C(),t(4,"h2",14),o(5),l(6,"translate"),a(),t(7,"p",15),o(8),l(9,"translate"),a(),t(10,"a",16),o(11),l(12,"translate"),a()()),i&2&&(n(5),p(d(6,3,"CMS_ORDERS.NO_ORDERS_TITLE")),n(3),p(d(9,5,"CMS_ORDERS.NO_ORDERS_DESC")),n(3),m(" ",d(12,7,"CMS_ORDERS.DISCOVER")," "))}function V(i,s){if(i&1&&(t(0,"div")(1,"span",31),o(2),l(3,"translate"),a(),t(4,"span",38),o(5),a()()),i&2){let e=c(2).$implicit;n(2),m("",d(3,2,"CMS_ORDERS.NOTES"),": "),n(3),p(e.notes)}}function $(i,s){if(i&1&&(t(0,"p",24),o(1),a()),i&2){let e=c().$implicit;n(),p(e.variant==null?null:e.variant.name)}}function H(i,s){if(i&1&&(t(0,"div",39)(1,"div",40)(2,"div",41),v(),t(3,"svg",42),_(4,"path",13),a()(),C(),t(5,"div",22)(6,"p",43),o(7),l(8,"translate"),a(),u(9,$,2,1,"p",24),a()(),t(10,"div",44)(11,"p",45),o(12),a(),t(13,"p",24),o(14),a()()()),i&2){let e=s.$implicit,r=c(5);n(7),p((e.variant==null||e.variant.product==null?null:e.variant.product.name)||d(8,5,"CMS_ORDERS.PRODUCT")),n(2),x(e.variant!=null&&e.variant.name?9:-1),n(3),m("\u20AC ",r.formatPrice(e.totalPrice),""),n(2),g("x",e.quantity," @ \u20AC ",r.formatPrice(e.unitPrice),"")}}function Y(i,s){if(i&1&&(t(0,"div",32),b(1,H,15,7,"div",39,L),a()),i&2){let e=c(2).$implicit;n(),h(e.items)}}function q(i,s){if(i&1&&(t(0,"div",36)(1,"span"),o(2),l(3,"translate"),a(),t(4,"span"),o(5),a()()),i&2){let e=c(2).$implicit,r=c(2);n(2),p(d(3,2,"CMS_ORDERS.DISCOUNT")),n(3),m("-\u20AC ",r.formatPrice(e.discountAmount),"")}}function z(i,s){if(i&1&&(t(0,"div",34)(1,"span"),o(2),l(3,"translate"),a(),t(4,"span",35),o(5),a()()),i&2){let e=c(2).$implicit,r=c(2);n(2),p(d(3,2,"CMS_ORDERS.SHIPPING")),n(3),m("\u20AC ",r.formatPrice(e.shippingCost),"")}}function J(i,s){if(i&1&&(t(0,"div",29)(1,"div",30)(2,"div")(3,"span",31),o(4),l(5,"translate"),a(),t(6,"span"),o(7),l(8,"translate"),a()(),u(9,V,6,4,"div"),a(),u(10,Y,3,0,"div",32),t(11,"div",33)(12,"div",34)(13,"span"),o(14),l(15,"translate"),a(),t(16,"span",35),o(17),a()(),u(18,q,6,4,"div",36)(19,z,6,4,"div",34),t(20,"div",37)(21,"span"),o(22),l(23,"translate"),a(),t(24,"span"),o(25),a()()()()),i&2){let e=c().$implicit,r=c(2);n(4),m("",d(5,13,"CMS_ORDERS.PAYMENT"),": "),n(2),E("",r.getPaymentConfig(e.paymentStatus).class," font-medium"),n(),p(d(8,15,r.getPaymentConfig(e.paymentStatus).label)),n(2),x(e.notes?9:-1),n(),x(e.items&&e.items.length>0?10:-1),n(4),p(d(15,17,"CMS_ORDERS.SUBTOTAL")),n(3),m("\u20AC ",r.formatPrice(e.subtotal),""),n(),x(r.parseFloat(e.discountAmount)>0?18:-1),n(),x(r.parseFloat(e.shippingCost)>0?19:-1),n(3),p(d(23,19,"CMS_ORDERS.TOTAL")),n(3),m("\u20AC ",r.formatPrice(e.total||e.subtotal),"")}}function K(i,s){if(i&1){let e=A();t(0,"div",17)(1,"button",18),D("click",function(){let S=T(e).$implicit,U=c(2);return w(U.toggleOrder(S.id))}),t(2,"div",19)(3,"div",20),v(),t(4,"svg",21),_(5,"path",13),a()(),C(),t(6,"div",22)(7,"p",23),o(8),l(9,"translate"),a(),t(10,"p",24),o(11),a()()(),t(12,"div",25)(13,"span"),o(14),l(15,"translate"),a(),t(16,"span",26),o(17),a(),v(),t(18,"svg",27),_(19,"path",28),a()()(),u(20,J,26,21,"div",29),a()}if(i&2){let e=s.$implicit,r=c(2);n(8),g("",d(9,11,"CMS_ORDERS.ORDER")," #",e.orderNumber,""),n(3),p(r.formatDate(e.createdAt)),n(2),E("text-xs px-2.5 py-1 rounded-full border ",r.getStatusConfig(e.status).class,""),n(),m(" ",d(15,13,r.getStatusConfig(e.status).label)," "),n(3),m("\u20AC ",r.formatPrice(e.total||e.subtotal),""),n(),I("rotate-180",r.expandedOrderId===e.id),n(2),x(r.expandedOrderId===e.id?20:-1)}}function Q(i,s){if(i&1&&(t(0,"div",9),b(1,K,21,15,"div",17,L),a()),i&2){let e=c();n(),h(e.orders)}}var W={pending:{label:"CMS_ORDERS.STATUS.PENDING",class:"bg-amber-500/10 text-amber-400 border-amber-500/20"},confirmed:{label:"CMS_ORDERS.STATUS.CONFIRMED",class:"bg-blue-500/10 text-blue-400 border-blue-500/20"},processing:{label:"CMS_ORDERS.STATUS.PROCESSING",class:"bg-purple-500/10 text-purple-400 border-purple-500/20"},shipped:{label:"CMS_ORDERS.STATUS.SHIPPED",class:"bg-cyan-500/10 text-cyan-400 border-cyan-500/20"},delivered:{label:"CMS_ORDERS.STATUS.DELIVERED",class:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20"},cancelled:{label:"CMS_ORDERS.STATUS.CANCELLED",class:"bg-red-500/10 text-red-400 border-red-500/20"}},X={pending:{label:"CMS_ORDERS.PAYMENT_STATUS.PENDING",class:"text-amber-400"},paid:{label:"CMS_ORDERS.PAYMENT_STATUS.PAID",class:"text-emerald-400"},failed:{label:"CMS_ORDERS.PAYMENT_STATUS.FAILED",class:"text-red-400"},refunded:{label:"CMS_ORDERS.PAYMENT_STATUS.REFUNDED",class:"text-purple-400"}},oe=(()=>{class i{api;auth;translate;orders=[];loading=!0;expandedOrderId=null;constructor(e,r,S){this.api=e,this.auth=r,this.translate=S}ngOnInit(){this.loadOrders()}toggleOrder(e){this.expandedOrderId=this.expandedOrderId===e?null:e}getStatusConfig(e){return W[e]||{label:e,class:"bg-white/10 text-white border-white/20"}}getPaymentConfig(e){return X[e]||{label:e,class:"text-[var(--text-secondary)]"}}formatDate(e){return new Date(e).toLocaleDateString("it-IT",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}formatPrice(e){return parseFloat(e).toFixed(2)}parseFloat(e){return Number.parseFloat(e)}loadOrders(){return O(this,null,function*(){try{let e=yield this.auth.getMe();this.orders=yield this.api.getOrders(e.id)}catch{this.orders=[]}finally{this.loading=!1}})}static \u0275fac=function(r){return new(r||i)(f(B),f(N),f(P))};static \u0275cmp=R({type:i,selectors:[["app-account-orders"]],decls:12,vars:4,consts:[[1,"min-h-screen","pt-28","pb-20",2,"background","var(--bg-primary)"],[1,"container-narrow"],[1,"flex","items-center","gap-3","mb-8"],["routerLink","/account",1,"text-[var(--text-muted)]","hover:text-white","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-3xl","font-bold","text-white"],[1,"space-y-4","animate-glow-pulse"],[1,"glass-card","rounded-2xl","p-12","text-center"],[1,"space-y-4"],[1,"glass-card","rounded-xl","p-6","h-24"],[1,"w-16","h-16","rounded-2xl","bg-white/[0.04]","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-[var(--text-muted)]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-xl","font-semibold","text-white","mb-2"],[1,"text-[var(--text-secondary)]","mb-6"],["routerLink","/products",1,"btn-primary","inline-block","px-6","py-3","rounded-xl"],[1,"glass-card","rounded-xl","overflow-hidden","transition-all","duration-200"],[1,"w-full","p-5","flex","items-center","justify-between","hover:bg-white/[0.02]","transition-colors","text-left",3,"click"],[1,"flex","items-center","gap-4","flex-1","min-w-0"],[1,"w-10","h-10","rounded-xl","bg-white/[0.04]","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-[var(--text-muted)]"],[1,"min-w-0"],[1,"font-semibold","text-white","text-sm"],[1,"text-xs","text-[var(--text-muted)]"],[1,"flex","items-center","gap-3"],[1,"font-semibold","text-white","text-sm","whitespace-nowrap"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-[var(--text-muted)]","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"border-t","border-white/[0.06]","p-5","space-y-4","animate-fade-in"],[1,"flex","flex-wrap","gap-4","text-sm"],[1,"text-[var(--text-muted)]"],[1,"space-y-2"],[1,"border-t","border-white/[0.06]","pt-3","space-y-1.5","text-sm"],[1,"flex","justify-between","text-[var(--text-secondary)]"],[1,"text-white"],[1,"flex","justify-between","text-emerald-400"],[1,"flex","justify-between","font-semibold","text-white","pt-1.5","border-t","border-white/[0.06]"],[1,"text-[var(--text-secondary)]"],[1,"flex","items-center","justify-between","p-3","rounded-lg","glass-subtle"],[1,"flex","items-center","gap-3","min-w-0"],[1,"w-8","h-8","rounded-lg","bg-white/[0.04]","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-[var(--text-muted)]"],[1,"text-sm","text-white","truncate"],[1,"text-right","flex-shrink-0","ml-3"],[1,"text-sm","text-white","font-medium"]],template:function(r,S){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),v(),t(4,"svg",4),_(5,"path",5),a()(),C(),t(6,"h1",6),o(7),l(8,"translate"),a()(),u(9,j,4,0,"div",7)(10,G,13,9,"div",8)(11,Q,3,0,"div",9),a()()),r&2&&(n(7),p(d(8,2,"CMS_ORDERS.TITLE")),n(2),x(S.loading?9:S.orders.length===0?10:11))},dependencies:[M,y,F,k],encapsulation:2})}return i})();export{oe as AccountOrdersComponent};
