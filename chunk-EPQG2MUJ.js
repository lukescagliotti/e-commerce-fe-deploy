import{a as O}from"./chunk-4DB2YMOA.js";import{c as b,e as w,f as L}from"./chunk-W32H2YVA.js";import{$ as u,Aa as x,Ea as E,Ia as _,Kb as y,Rb as I,Ta as h,Wb as R,Xa as e,Ya as i,Za as c,Zb as T,aa as f,ab as k,c as g,gb as l,hb as p,ib as v,p as M,rb as s,sb as m,wa as n}from"./chunk-CW4A2IZA.js";function j(t,C){t&1&&(e(0,"div",9),u(),e(1,"svg",10),c(2,"circle",11)(3,"path",12),i(),f(),e(4,"p",13),l(5),s(6,"translate"),i()()),t&2&&(n(5),p(m(6,1,"CMS_CONFIRM_EMAIL.VERIFYING")))}function B(t,C){t&1&&(e(0,"div",14),u(),e(1,"svg",15),c(2,"path",16),i()(),f(),e(3,"h2",17),l(4),s(5,"translate"),i(),e(6,"p",18),l(7),s(8,"translate"),i(),e(9,"a",19),l(10),s(11,"translate"),i()),t&2&&(n(4),p(m(5,3,"CMS_CONFIRM_EMAIL.SUCCESS_TITLE")),n(3),p(m(8,5,"CMS_CONFIRM_EMAIL.SUCCESS_DESC")),n(3),v(" ",m(11,7,"CMS_CONFIRM_EMAIL.GO_LOGIN")," "))}function F(t,C){if(t&1&&(e(0,"div",20),u(),e(1,"svg",21),c(2,"path",22),i()(),f(),e(3,"h2",17),l(4),s(5,"translate"),i(),e(6,"p",18),l(7),i(),e(8,"a",23),l(9),s(10,"translate"),i()),t&2){let a=k();n(4),p(m(5,3,"CMS_CONFIRM_EMAIL.ERROR_TITLE")),n(3),p(a.error),n(2),v(" ",m(10,5,"CMS_CONFIRM_EMAIL.GO_HOME")," ")}}var D=(()=>{class t{route;router;http;loading=!0;success=!1;error=null;constructor(a,r,o){this.route=a,this.router=r,this.http=o}ngOnInit(){return g(this,null,function*(){let a=this.route.snapshot.queryParams.token_hash,r=this.route.snapshot.queryParams.type,o=this.route.snapshot.queryParams.vendor_id;if(!a){this.loading=!1,this.error="Link di conferma non valido.";return}try{let d=new URLSearchParams;d.set("token_hash",a),r&&d.set("type",r),o&&d.set("vendor_id",o);let S=yield M(this.http.get(`${O.apiUrl}/auth/callback?${d.toString()}`));this.loading=!1,S.success?this.success=!0:this.error=S.message||"Conferma email fallita."}catch(d){this.loading=!1,this.error=d?.error?.message||"Conferma email fallita. Il link potrebbe essere scaduto."}})}static \u0275fac=function(r){return new(r||t)(x(b),x(w),x(I))};static \u0275cmp=E({type:t,selectors:[["app-confirm-email"]],decls:12,vars:3,consts:[[1,"min-h-screen","flex","flex-col","justify-center","py-12","px-6",2,"background","var(--bg-primary)"],[1,"max-w-md","w-full","mx-auto"],[1,"text-center","mb-8"],["routerLink","/",1,"inline-flex","items-center","gap-2"],[1,"w-10","h-10","rounded-xl","bg-gradient-to-br","from-cyan-400","to-blue-500","flex","items-center","justify-center","shadow-lg","shadow-cyan-500/20"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"glass-card","rounded-2xl","p-10","text-center","relative","overflow-hidden"],[1,"absolute","top-0","left-1/2","-translate-x-1/2","w-1/2","h-px",2,"background","linear-gradient(to right, transparent, var(--accent-cyan), transparent)"],[1,"flex","flex-col","items-center","gap-4"],["viewBox","0 0 24 24",1,"animate-spin","h-10","w-10","text-[var(--accent-cyan)]"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4","fill","none",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-[var(--text-secondary)]"],[1,"w-16","h-16","rounded-full","flex","items-center","justify-center","mx-auto","mb-4",2,"background","rgba(16, 185, 129, 0.1)","border","1px solid rgba(16, 185, 129, 0.2)"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-emerald-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-2xl","font-bold","text-white","mb-2"],[1,"text-[var(--text-secondary)]","mb-6"],["routerLink","/login",1,"block","w-full","btn-primary","py-3","px-4","rounded-xl","font-medium","text-center"],[1,"w-16","h-16","rounded-full","flex","items-center","justify-center","mx-auto","mb-4",2,"background","rgba(239, 68, 68, 0.1)","border","1px solid rgba(239, 68, 68, 0.2)"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["routerLink","/",1,"block","w-full","btn-primary","py-3","px-4","rounded-xl","font-medium","text-center"]],template:function(r,o){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"div",4),u(),e(5,"svg",5),c(6,"path",6),i()()()(),f(),e(7,"div",7),c(8,"div",8),_(9,j,7,3,"div",9)(10,B,12,9)(11,F,11,7),i()()()),r&2&&(n(9),h(o.loading?9:-1),n(),h(o.success?10:-1),n(),h(o.error?11:-1))},dependencies:[y,L,T,R],encapsulation:2})}return t})();export{D as ConfirmEmailComponent};
