import{a as N}from"./chunk-A4ZHDWHW.js";import{q as j}from"./chunk-IQKT5BF2.js";import{a as O}from"./chunk-U4F5Q3TV.js";import"./chunk-4DB2YMOA.js";import{f as L}from"./chunk-AGIFKPVW.js";import{$ as v,$a as y,Aa as E,Ea as M,Ia as _,Lb as V,Oa as b,Ta as h,Ua as A,Va as I,Wa as w,Xa as t,Xb as P,Ya as i,Z as g,Za as x,_ as T,_a as B,_b as F,aa as f,ab as u,c as S,gb as r,hb as s,ib as m,kb as R,qb as k,sb as l,tb as d,wa as a}from"./chunk-RJSZ27IG.js";var H=()=>[1,2,3],G=()=>({redirect:"/cart"}),q=(n,c)=>c.id;function D(n,c){if(n&1&&(t(0,"p",4),r(1),l(2,"translate"),l(3,"translate"),l(4,"translate"),i()),n&2){let e=u();a(),R("",e.cart.cartItems.length," ",e.cart.cartItems.length===1?d(2,3,"CMS_CART.ITEM"):d(3,5,"CMS_CART.ITEMS")," ",d(4,7,"CMS_CART.IN_CART"),"")}}function U(n,c){n&1&&(t(0,"div",11),x(1,"div",12),t(2,"div",13),x(3,"div",14)(4,"div",15)(5,"div",16),i()())}function $(n,c){n&1&&(t(0,"div",8),I(1,U,6,0,"div",11,A),i()),n&2&&(a(),w(k(0,H)))}function z(n,c){n&1&&(t(0,"div",9)(1,"div",17),v(),t(2,"svg",18),x(3,"path",19),i()(),f(),t(4,"h2",20),r(5),l(6,"translate"),i(),t(7,"p",21),r(8),l(9,"translate"),i(),t(10,"a",22),r(11),l(12,"translate"),i()()),n&2&&(a(5),s(d(6,4,"CMS_CART.LOGIN_TITLE")),a(3),s(d(9,6,"CMS_CART.LOGIN_DESC")),a(2),b("queryParams",k(10,G)),a(),m(" ",d(12,8,"CMS_CART.LOGIN")," "))}function Y(n,c){n&1&&(t(0,"div",9)(1,"div",17),v(),t(2,"svg",18),x(3,"path",23),i()(),f(),t(4,"h2",20),r(5),l(6,"translate"),i(),t(7,"p",21),r(8),l(9,"translate"),i(),t(10,"a",24),r(11),l(12,"translate"),i()()),n&2&&(a(5),s(d(6,3,"CMS_CART.EMPTY_TITLE")),a(3),s(d(9,5,"CMS_CART.EMPTY_DESC")),a(3),m(" ",d(12,7,"CMS_CART.DISCOVER")," "))}function Q(n,c){if(n&1&&(t(0,"p",44),r(1),i()),n&2){let e=u().$implicit;a(),s(e.productVariant.name)}}function K(n,c){if(n&1){let e=B();t(0,"div",26)(1,"div",38)(2,"div",39),v(),t(3,"svg",40),x(4,"path",41),i()(),f(),t(5,"div",42)(6,"h3",43),r(7),l(8,"translate"),i(),_(9,Q,2,1,"p",44),t(10,"p",45),r(11),i()(),t(12,"div",46)(13,"button",47),l(14,"translate"),y("click",function(){let p=g(e).$implicit,C=u(2);return T(C.removeItem(p))}),v(),t(15,"svg",48),x(16,"path",49),i()(),f(),t(17,"div",50)(18,"button",51),y("click",function(){let p=g(e).$implicit,C=u(2);return T(C.updateQuantity(p,p.quantity-1))}),r(19," \u2212 "),i(),t(20,"span",52),r(21),i(),t(22,"button",53),y("click",function(){let p=g(e).$implicit,C=u(2);return T(C.updateQuantity(p,p.quantity+1))}),r(23," + "),i()()()()()}if(n&2){let e=c.$implicit,o=u(2);a(7),m(" ",(e.productVariant==null||e.productVariant.product==null?null:e.productVariant.product.name)||d(8,6,"CMS_CART.PRODUCT")," "),a(2),h(e.productVariant!=null&&e.productVariant.name?9:-1),a(2),m(" \u20AC ",o.getItemPrice(e).toFixed(2)," "),a(2),b("title",d(14,8,"CMS_CART.REMOVE")),a(5),b("disabled",e.quantity<=1),a(3),m(" ",e.quantity," ")}}function J(n,c){n&1&&(t(0,"span",33),r(1),l(2,"translate"),i()),n&2&&(a(),s(d(2,1,"CMS_CART.FREE")))}function W(n,c){if(n&1&&(t(0,"span",32),r(1),i()),n&2){let e=u(2);a(),m("\u20AC ",e.shippingCost.toFixed(2),"")}}function X(n,c){n&1&&(t(0,"p",34),r(1),l(2,"translate"),i()),n&2&&(a(),s(d(2,1,"CMS_CART.FREE_SHIPPING_NOTE")))}function Z(n,c){if(n&1&&(t(0,"div",10)(1,"div",25),I(2,K,24,10,"div",26,q),i(),t(4,"div",27)(5,"div",28)(6,"h2",29),r(7),l(8,"translate"),i(),t(9,"div",30)(10,"div",31)(11,"span"),r(12),l(13,"translate"),i(),t(14,"span",32),r(15),i()(),t(16,"div",31)(17,"span"),r(18),l(19,"translate"),i(),_(20,J,3,3,"span",33)(21,W,2,1,"span",32),i(),_(22,X,3,3,"p",34),t(23,"div",35)(24,"span"),r(25),l(26,"translate"),i(),t(27,"span"),r(28),i()()(),t(29,"a",36),r(30),l(31,"translate"),i(),t(32,"a",37),r(33),l(34,"translate"),i()()()()),n&2){let e=u();a(2),w(e.cart.cartItems),a(5),s(d(8,10,"CMS_CART.SUMMARY")),a(5),s(d(13,12,"CMS_CART.SUBTOTAL")),a(3),m("\u20AC ",e.subtotal.toFixed(2),""),a(3),s(d(19,14,"CMS_CART.SHIPPING")),a(2),h(e.subtotal>=50?20:21),a(2),h(e.subtotal<50?22:-1),a(3),s(d(26,16,"CMS_CART.TOTAL")),a(3),m("\u20AC ",e.total.toFixed(2),""),a(2),m(" ",d(31,18,"CMS_CART.CHECKOUT")," "),a(3),m(" ",d(34,20,"CMS_NAV.CONTINUE_SHOPPING")," ")}}var dt=(()=>{class n{api;auth;cart=null;customer=null;loading=!0;constructor(e,o){this.api=e,this.auth=o}ngOnInit(){this.loadCart()}getItemPrice(e){let o=e.productVariant?.product,p=o?parseFloat(o.finalPrice):0,C=e.productVariant?parseFloat(e.productVariant.priceAdjustment):0;return p+C}get subtotal(){return this.cart?this.cart.cartItems.reduce((e,o)=>e+this.getItemPrice(o)*o.quantity,0):0}get shippingCost(){return this.subtotal>=50?0:4.99}get total(){return this.subtotal+this.shippingCost}updateQuantity(e,o){return S(this,null,function*(){if(!(!this.customer||o<1))try{this.cart=yield this.api.updateCartItem(this.customer.id,e.id,o)}catch(p){console.error("Error updating quantity:",p)}})}removeItem(e){return S(this,null,function*(){if(this.customer)try{this.cart=yield this.api.removeCartItem(this.customer.id,e.id)}catch(o){console.error("Error removing item:",o)}})}loadCart(){return S(this,null,function*(){try{this.customer=yield this.auth.getMe(),this.cart=yield this.api.getCart(this.customer.id)}catch{this.customer=null,this.cart=null}finally{this.loading=!1}})}static \u0275fac=function(o){return new(o||n)(E(O),E(N))};static \u0275cmp=M({type:n,selectors:[["app-cart"]],decls:17,vars:8,consts:[[1,"min-h-screen","pt-28","pb-20",2,"background","var(--bg-primary)"],[1,"container-narrow"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-3xl","font-bold","text-white"],[1,"text-[var(--text-secondary)]","mt-1","text-sm"],["routerLink","/products",1,"text-[var(--accent-cyan)]","hover:text-cyan-300","font-medium","text-sm","flex","items-center","gap-1","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"space-y-4"],[1,"glass-card","rounded-2xl","p-12","text-center"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"glass-card","rounded-xl","p-6","flex","gap-4","animate-glow-pulse"],[1,"w-24","h-24","rounded-lg",2,"background","var(--bg-tertiary)"],[1,"flex-1","space-y-3"],[1,"h-4","rounded-full","w-1/3",2,"background","var(--glass-bg-strong)"],[1,"h-4","rounded-full","w-1/4",2,"background","var(--glass-bg-strong)"],[1,"h-4","rounded-full","w-1/5",2,"background","var(--glass-bg-strong)"],[1,"w-16","h-16","rounded-full","flex","items-center","justify-center","mx-auto","mb-4",2,"background","var(--glass-bg-strong)"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-[var(--text-muted)]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-xl","font-semibold","text-white","mb-2"],[1,"text-[var(--text-secondary)]","mb-6"],["routerLink","/login",1,"btn-primary","inline-block","px-6","py-3","rounded-xl",3,"queryParams"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],["routerLink","/products",1,"btn-primary","inline-block","px-6","py-3","rounded-xl"],[1,"lg:col-span-2","space-y-4"],[1,"glass-card","rounded-xl","p-6"],[1,"lg:col-span-1"],[1,"glass-card","rounded-xl","p-6","sticky","top-28"],[1,"text-lg","font-semibold","text-white","mb-4"],[1,"space-y-3","text-sm"],[1,"flex","justify-between","text-[var(--text-secondary)]"],[1,"text-white"],[1,"text-emerald-400","font-medium"],[1,"text-xs","text-[var(--text-muted)]"],[1,"border-t","border-white/[0.06]","pt-3","flex","justify-between","font-semibold","text-white","text-base"],["routerLink","/checkout",1,"mt-6","w-full","inline-block","text-center","btn-primary","py-3","px-6","rounded-xl","font-medium"],["routerLink","/products",1,"mt-3","w-full","inline-block","text-center","text-[var(--accent-cyan)]","hover:text-cyan-300","font-medium","text-sm","py-2","transition-colors"],[1,"flex","gap-4"],[1,"w-24","h-24","rounded-lg","flex","items-center","justify-center","flex-shrink-0",2,"background","var(--bg-tertiary)"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-[var(--text-muted)]","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"flex-1","min-w-0"],[1,"text-base","font-medium","text-white","truncate"],[1,"text-sm","text-[var(--text-tertiary)]","mt-0.5"],[1,"text-base","font-semibold","text-white","mt-2"],[1,"flex","flex-col","items-end","gap-3"],[1,"text-[var(--text-muted)]","hover:text-red-400","transition-colors","p-1",3,"click","title"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"inline-flex","items-center","glass","rounded-xl","overflow-hidden"],[1,"px-3","py-1.5","text-[var(--text-secondary)]","hover:text-white","hover:bg-white/[0.06]","transition-colors","font-medium","text-sm","disabled:opacity-30","disabled:cursor-not-allowed",3,"click","disabled"],[1,"px-3","py-1.5","border-x","border-white/[0.06]","text-white","font-medium","text-sm","min-w-[2.5rem]","text-center"],[1,"px-3","py-1.5","text-[var(--text-secondary)]","hover:text-white","hover:bg-white/[0.06]","transition-colors","font-medium","text-sm",3,"click"]],template:function(o,p){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),r(5),l(6,"translate"),i(),_(7,D,5,9,"p",4),i(),t(8,"a",5),v(),t(9,"svg",6),x(10,"path",7),i(),r(11),l(12,"translate"),i()(),_(13,$,3,1,"div",8)(14,z,13,11,"div",9)(15,Y,13,9,"div",9)(16,Z,35,22,"div",10),i()()),o&2&&(a(5),s(d(6,4,"CMS_CART.TITLE")),a(2),h(p.cart&&p.cart.cartItems.length>0?7:-1),a(4),m(" ",d(12,6,"CMS_NAV.CONTINUE_SHOPPING")," "),a(2),h(p.loading?13:p.customer?!p.cart||p.cart.cartItems.length===0?15:16:14))},dependencies:[V,L,j,F,P],encapsulation:2})}return n})();export{dt as CartComponent};
