import{c as w,f as U,j as F,k as P,l as L,q as B}from"./chunk-IQKT5BF2.js";import{a as N}from"./chunk-U4F5Q3TV.js";import"./chunk-4DB2YMOA.js";import{$a as f,Aa as D,Ea as R,Ia as b,Lb as I,Oa as g,Ra as x,Ta as A,Va as u,Wa as _,Xa as r,Xb as y,Ya as n,Z as v,Za as O,_ as T,_a as M,_b as h,ab as S,c as m,gb as l,hb as o,ib as E,sb as d,tb as s,wa as t}from"./chunk-RJSZ27IG.js";var $=(i,c)=>c.value,H=(i,c)=>c.id;function G(i,c){if(i&1){let e=M();r(0,"button",11),f("click",function(){let p=v(e).$implicit,C=S();return T(C.filterByStatus(p.value))}),l(1),d(2,"translate"),n()}if(i&2){let e=c.$implicit,a=S();x(a.currentFilter===e.value?"px-3 py-1.5 rounded-lg text-sm font-medium bg-cyan-500/15 text-cyan-400":"px-3 py-1.5 rounded-lg text-sm font-medium text-[var(--text-secondary)] hover:bg-white/[0.06] hover:text-white transition-colors"),t(),E(" ",s(2,3,e.label)," ")}}function k(i,c){i&1&&(r(0,"div",8),O(1,"div",12),n())}function Y(i,c){i&1&&(r(0,"div",9),l(1),d(2,"translate"),n()),i&2&&(t(),o(s(2,1,"CMS_ADMIN.NO_ORDERS")))}function j(i,c){if(i&1&&(r(0,"option",23),l(1),d(2,"translate"),n()),i&2){let e=c.$implicit;g("value",e.value),t(),o(s(2,2,e.label))}}function q(i,c){if(i&1){let e=M();r(0,"tr",17)(1,"td",18),l(2),n(),r(3,"td",19)(4,"span"),l(5),d(6,"translate"),n()(),r(7,"td",19)(8,"span"),l(9),d(10,"translate"),n()(),r(11,"td",20),l(12),n(),r(13,"td",21),l(14),n(),r(15,"td",19)(16,"select",22),f("ngModelChange",function(p){let C=v(e).$implicit,V=S(2);return T(V.updateStatus(C,p))}),u(17,j,3,4,"option",23,$),n()()()}if(i&2){let e=c.$implicit,a=S(2);t(2),o(e.orderNumber),t(2),x(a.getStatusClass(e.status)),t(),o(s(6,10,a.getStatusLabel(e.status))),t(3),x(a.getPaymentClass(e.paymentStatus)),t(),o(s(10,12,a.getPaymentLabel(e.paymentStatus))),t(3),E("\u20AC ",a.parseFloat(e.total).toFixed(2),""),t(2),o(a.formatDate(e.createdAt)),t(2),g("ngModel",e.status),t(),_(a.allStatuses)}}function z(i,c){if(i&1&&(r(0,"div",10)(1,"table",13)(2,"thead")(3,"tr",14)(4,"th",15),l(5),d(6,"translate"),n(),r(7,"th",15),l(8),d(9,"translate"),n(),r(10,"th",15),l(11),d(12,"translate"),n(),r(13,"th",15),l(14),d(15,"translate"),n(),r(16,"th",15),l(17),d(18,"translate"),n(),r(19,"th",15),l(20),d(21,"translate"),n()()(),r(22,"tbody",16),u(23,q,19,14,"tr",17,H),n()()()),i&2){let e=S();t(5),o(s(6,6,"CMS_ADMIN.TH_ORDER")),t(3),o(s(9,8,"CMS_ADMIN.TH_STATUS")),t(3),o(s(12,10,"CMS_ADMIN.TH_PAYMENT")),t(3),o(s(15,12,"CMS_ADMIN.TH_TOTAL")),t(3),o(s(18,14,"CMS_ADMIN.TH_DATE")),t(3),o(s(21,16,"CMS_ADMIN.TH_ACTIONS")),t(3),_(e.orders)}}var te=(()=>{class i{api;orders=[];loading=!0;currentFilter="";statusFilters=[{value:"",label:"CMS_ADMIN.ALL"},{value:"pending",label:"CMS_ORDERS.STATUS.PENDING"},{value:"confirmed",label:"CMS_ORDERS.STATUS.CONFIRMED"},{value:"processing",label:"CMS_ORDERS.STATUS.PROCESSING"},{value:"shipped",label:"CMS_ORDERS.STATUS.SHIPPED"},{value:"delivered",label:"CMS_ORDERS.STATUS.DELIVERED"},{value:"cancelled",label:"CMS_ORDERS.STATUS.CANCELLED"}];allStatuses=[{value:"pending",label:"CMS_ORDERS.STATUS.PENDING"},{value:"confirmed",label:"CMS_ORDERS.STATUS.CONFIRMED"},{value:"processing",label:"CMS_ORDERS.STATUS.PROCESSING"},{value:"shipped",label:"CMS_ORDERS.STATUS.SHIPPED"},{value:"delivered",label:"CMS_ORDERS.STATUS.DELIVERED"},{value:"cancelled",label:"CMS_ORDERS.STATUS.CANCELLED"}];constructor(e){this.api=e}ngOnInit(){this.loadOrders()}filterByStatus(e){return m(this,null,function*(){this.currentFilter=e,this.loading=!0,yield this.loadOrders()})}updateStatus(e,a){return m(this,null,function*(){try{let p=yield this.api.updateOrderStatus(e.id,a);e.status=p.status}catch(p){console.error("Error updating order status:",p)}})}parseFloat(e){return Number.parseFloat(e)}formatDate(e){return new Date(e).toLocaleDateString("it-IT",{day:"2-digit",month:"short",year:"numeric"})}getStatusLabel(e){return{pending:"CMS_ORDERS.STATUS.PENDING",confirmed:"CMS_ORDERS.STATUS.CONFIRMED",processing:"CMS_ORDERS.STATUS.PROCESSING",shipped:"CMS_ORDERS.STATUS.SHIPPED",delivered:"CMS_ORDERS.STATUS.DELIVERED",cancelled:"CMS_ORDERS.STATUS.CANCELLED"}[e]||e}getStatusClass(e){return`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{pending:"bg-yellow-500/15 text-yellow-400",confirmed:"bg-blue-500/15 text-blue-400",processing:"bg-indigo-500/15 text-indigo-400",shipped:"bg-purple-500/15 text-purple-400",delivered:"bg-emerald-500/15 text-emerald-400",cancelled:"bg-red-500/15 text-red-400"}[e]||"bg-white/[0.08] text-[var(--text-secondary)]"}`}getPaymentLabel(e){return{pending:"CMS_ORDERS.PAYMENT_STATUS.PENDING",paid:"CMS_ORDERS.PAYMENT_STATUS.PAID",failed:"CMS_ORDERS.PAYMENT_STATUS.FAILED",refunded:"CMS_ORDERS.PAYMENT_STATUS.REFUNDED"}[e]||e}getPaymentClass(e){return`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{pending:"bg-yellow-500/15 text-yellow-400",paid:"bg-emerald-500/15 text-emerald-400",failed:"bg-red-500/15 text-red-400",refunded:"bg-white/[0.08] text-[var(--text-secondary)]"}[e]||"bg-white/[0.08] text-[var(--text-secondary)]"}`}loadOrders(){return m(this,null,function*(){try{this.orders=yield this.api.getAllOrders(this.currentFilter||void 0)}catch(e){console.error("Error loading orders:",e)}finally{this.loading=!1}})}static \u0275fac=function(a){return new(a||i)(D(N))};static \u0275cmp=R({type:i,selectors:[["app-orders"]],decls:20,vars:10,consts:[[1,"flex","items-center","justify-between","mb-8"],[1,"text-2xl","font-semibold","text-white"],[1,"text-[var(--text-secondary)]","mt-1"],[1,"glass-card","rounded-xl","p-4","mb-6"],[1,"flex","items-center","gap-3","flex-wrap"],[1,"text-sm","font-medium","text-[var(--text-secondary)]"],[3,"class"],[1,"glass-card","rounded-xl"],[1,"p-8","text-center"],[1,"p-8","text-center","text-[var(--text-secondary)]"],[1,"overflow-x-auto"],[3,"click"],[1,"animate-spin","h-8","w-8","border-2","border-cyan-400","border-t-transparent","rounded-full","mx-auto"],[1,"w-full"],[1,"text-left","text-xs","font-medium","text-[var(--text-muted)]","uppercase","tracking-wider","border-b","border-white/[0.06]"],[1,"px-6","py-3"],[1,"divide-y","divide-white/[0.06]"],[1,"hover:bg-white/[0.04]","transition-colors"],[1,"px-6","py-4","text-sm","font-medium","text-white"],[1,"px-6","py-4"],[1,"px-6","py-4","text-sm","text-white","font-medium"],[1,"px-6","py-4","text-sm","text-[var(--text-secondary)]"],[1,"input-glass","text-sm","rounded-lg","px-2","py-1",3,"ngModelChange","ngModel"],[3,"value"]],template:function(a,p){a&1&&(r(0,"div")(1,"div",0)(2,"div")(3,"h1",1),l(4),d(5,"translate"),n(),r(6,"p",2),l(7),d(8,"translate"),n()()(),r(9,"div",3)(10,"div",4)(11,"span",5),l(12),d(13,"translate"),n(),u(14,G,3,5,"button",6,$),n()(),r(16,"div",7),b(17,k,2,0,"div",8)(18,Y,3,3,"div",9)(19,z,25,18,"div",10),n()()),a&2&&(t(4),o(s(5,4,"CMS_ADMIN.ORDERS")),t(3),o(s(8,6,"CMS_ADMIN.MANAGE_ORDERS")),t(5),E("",s(13,8,"CMS_ADMIN.FILTER_BY_STATUS"),":"),t(2),_(p.statusFilters),t(3),A(p.loading?17:p.orders.length===0?18:19))},dependencies:[I,B,P,L,F,w,U,h,y],encapsulation:2})}return i})();export{te as OrdersComponent};
