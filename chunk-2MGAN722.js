import{a as U}from"./chunk-YKLXZAJV.js";import{m as F}from"./chunk-ZMXNLKYV.js";import{a as j}from"./chunk-EC2R27NT.js";import"./chunk-V3ERSR33.js";import{e as V,f as L}from"./chunk-SWYPXXNO.js";import{$ as C,$a as d,Da as I,Eb as M,Ha as _,Na as y,Pb as O,Qa as w,Qb as R,Sa as x,Tb as B,Ua as D,Va as E,Wa as i,Xa as n,Ya as v,Z as g,Za as k,_ as h,_a as b,aa as P,c as T,eb as o,fb as c,gb as m,hb as A,ob as s,pb as p,va as a,za as f}from"./chunk-AHJKKBRJ.js";var q=(e,r)=>r.id;function Q(e,r){e&1&&(i(0,"div",0)(1,"div",3)(2,"div",4),v(3,"div",5),i(4,"div",6)(5,"div",7),v(6,"div",8),i(7,"div",9),v(8,"div",10)(9,"div",11)(10,"div",12),n()()()()()())}function G(e,r){e&1&&(i(0,"div",1)(1,"div",13)(2,"h1",14),o(3),s(4,"translate"),n(),i(5,"a",15),o(6),s(7,"translate"),n()()()),e&2&&(a(3),c(p(4,2,"CMS_PRODUCT_DETAIL.NOT_FOUND")),a(3),c(p(7,4,"CMS_PRODUCT_DETAIL.BACK_TO_PRODUCTS")))}function N(e,r){if(e&1&&(i(0,"span",37),o(1),n(),i(2,"span",38),o(3),n()),e&2){let t=d(2);a(),m("\u20AC ",t.basePrice.toFixed(2),""),a(2),m("-",t.product.discountPercentage,"%")}}function H(e,r){if(e&1&&(i(0,"span",31),v(1,"span",39),o(2),s(3,"translate"),n()),e&2){let t=d(2);a(2),A(" ",t.totalStock," ",p(3,2,"CMS_PRODUCT_DETAIL.AVAILABLE")," ")}}function $(e,r){e&1&&(i(0,"span",32),C(),i(1,"svg",40),v(2,"path",41),n(),o(3),s(4,"translate"),n()),e&2&&(a(3),m(" ",p(4,1,"CMS_PRODUCT_DETAIL.OUT_OF_STOCK")," "))}function z(e,r){if(e&1&&(i(0,"span",55),o(1),n()),e&2){let t=d().$implicit,l=d(4);a(),m("(+\u20AC",l.getAdjustment(t).toFixed(2),")")}}function K(e,r){if(e&1){let t=k();i(0,"button",54),b("click",function(){let u=g(t).$implicit,S=d(4);return h(S.selectedVariant=u)}),o(1),_(2,z,2,1,"span",55),n()}if(e&2){let t=r.$implicit,l=d(4);w((l.selectedVariant==null?null:l.selectedVariant.id)===t.id?"px-4 py-2.5 rounded-xl text-sm font-medium transition-all glass-strong border border-[var(--accent-cyan)] text-white shadow-lg shadow-cyan-500/10":t.stockQuantity===0?"px-4 py-2.5 rounded-xl text-sm font-medium transition-all glass-subtle border border-white/[0.04] text-[var(--text-muted)] cursor-not-allowed":"px-4 py-2.5 rounded-xl text-sm font-medium transition-all glass border border-white/[0.08] text-[var(--text-secondary)] hover:text-white hover:border-white/[0.15]"),y("disabled",t.stockQuantity===0),a(),m(" ",t.name," "),a(),x(l.getAdjustment(t)>0?2:-1)}}function Y(e,r){if(e&1&&(i(0,"div")(1,"label",42),o(2),s(3,"translate"),n(),i(4,"div",52),D(5,K,3,5,"button",53,q),n()()),e&2){let t=d(3);a(2),c(p(3,1,"CMS_PRODUCT_DETAIL.VARIANT")),a(3),E(t.variants)}}function J(e,r){e&1&&(C(),i(0,"svg",56),v(1,"circle",57)(2,"path",58),n(),o(3),s(4,"translate")),e&2&&(a(3),m(" ",p(4,1,"CMS_PRODUCT_DETAIL.ADDING")," "))}function W(e,r){e&1&&(C(),i(0,"svg",59),v(1,"path",60),n(),o(2),s(3,"translate")),e&2&&(a(2),m(" ",p(3,1,"CMS_PRODUCT_DETAIL.ADD_TO_CART")," "))}function X(e,r){e&1&&(C(),i(0,"svg",61),v(1,"path",62),n())}function Z(e,r){e&1&&(C(),i(0,"svg",61),v(1,"path",41),n())}function tt(e,r){if(e&1&&(i(0,"div"),_(1,X,2,0,":svg:svg",61)(2,Z,2,0,":svg:svg",61),o(3),n()),e&2){let t=d(3);w(t.message.type==="success"?"flex items-center gap-2 px-4 py-3 rounded-xl text-sm glass border border-emerald-500/20 text-emerald-400":"flex items-center gap-2 px-4 py-3 rounded-xl text-sm glass border border-red-500/20 text-red-400"),a(),x(t.message.type==="success"?1:2),a(2),m(" ",t.message.text," ")}}function et(e,r){if(e&1){let t=k();i(0,"div",34),_(1,Y,7,3,"div"),i(2,"div")(3,"label",42),o(4),s(5,"translate"),n(),i(6,"div",43)(7,"button",44),b("click",function(){g(t);let u=d(2);return h(u.decreaseQty())}),o(8,"\u2212"),n(),i(9,"span",45),o(10),n(),i(11,"button",44),b("click",function(){g(t);let u=d(2);return h(u.increaseQty())}),o(12,"+"),n()()(),i(13,"div",46)(14,"div",47)(15,"span",48),o(16),s(17,"translate"),n(),i(18,"span",49),o(19),n()()(),i(20,"button",50),b("click",function(){g(t);let u=d(2);return h(u.handleAddToCart())}),_(21,J,5,3)(22,W,4,3),n(),_(23,tt,4,4,"div",51),n()}if(e&2){let t=d(2);a(),x(t.variants.length>1?1:-1),a(3),c(p(5,8,"CMS_PRODUCT_DETAIL.QUANTITY")),a(6),c(t.quantity),a(6),c(p(17,10,"CMS_PRODUCT_DETAIL.TOTAL")),a(3),m("\u20AC ",(t.cartItemPrice*t.quantity).toFixed(2),""),a(),y("disabled",t.addingToCart||!t.selectedVariant||t.selectedVariant.stockQuantity===0),a(),x(t.addingToCart?21:22),a(2),x(t.message?23:-1)}}function it(e,r){if(e&1&&(i(0,"div",35)(1,"p",63),o(2),s(3,"translate"),i(4,"a",64),o(5),n()()()),e&2){let t=d(2);a(2),m(" ",p(3,3,"CMS_PRODUCT_DETAIL.CATEGORY"),": "),a(2),y("routerLink","/categories/"+t.product.category.slug),a(),m(" ",t.product.category.name," ")}}function nt(e,r){if(e&1&&(i(0,"div",67)(1,"dt",68),o(2),n(),i(3,"dd",21),o(4),n()()),e&2){let t=r.$implicit;a(2),c(t.title||t.type),a(2),c(t.value)}}function at(e,r){if(e&1&&(i(0,"div",36)(1,"h2",65),o(2),s(3,"translate"),n(),i(4,"dl",66),D(5,nt,5,2,"div",67,q),n()()),e&2){let t=d(2);a(2),c(p(3,1,"CMS_PRODUCT_DETAIL.DETAILS")),a(3),E(t.product.productDetails)}}function ot(e,r){if(e&1&&(i(0,"div",2)(1,"div",3)(2,"nav",16)(3,"ol",17)(4,"li")(5,"a",18),o(6),s(7,"translate"),n()(),i(8,"li",19),o(9,"/"),n(),i(10,"li")(11,"a",20),o(12),s(13,"translate"),n()(),i(14,"li",19),o(15,"/"),n(),i(16,"li",21),o(17),n()()(),i(18,"div",6)(19,"div",7)(20,"div",22),C(),i(21,"svg",23),v(22,"path",24),n()(),P(),i(23,"div",25)(24,"p",26),o(25),n(),i(26,"h1",27),o(27),n(),i(28,"div",28)(29,"span",29),o(30),n(),_(31,N,4,2),n(),i(32,"div",30),_(33,H,4,4,"span",31)(34,$,5,3,"span",32),n(),i(35,"p",33),o(36),n(),_(37,et,24,12,"div",34)(38,it,6,5,"div",35),n()()(),_(39,at,7,3,"div",36),n()()),e&2){let t=d();a(6),c(p(7,12,"CMS_NAV.HOME")),a(6),c(p(13,14,"CMS_NAV.PRODUCTS")),a(5),c(t.product.name),a(8),c(t.product.brand),a(2),c(t.product.name),a(3),m("\u20AC ",t.finalPrice.toFixed(2),""),a(),x(t.hasDiscount?31:-1),a(2),x(t.totalStock>0?33:34),a(3),c(t.product.description),a(),x(t.variants.length>0?37:-1),a(),x(t.product.category?38:-1),a(),x(t.product.productDetails&&t.product.productDetails.length>0?39:-1)}}var _t=(()=>{class e{api;auth;router;translate;slug;product=null;loading=!0;selectedVariant=null;quantity=1;addingToCart=!1;message=null;constructor(t,l,u,S){this.api=t,this.auth=l,this.router=u,this.translate=S}ngOnInit(){this.loadProduct()}get hasDiscount(){return this.product?parseFloat(this.product.discountPercentage)>0:!1}get basePrice(){return this.product?parseFloat(this.product.basePrice):0}get finalPrice(){return this.product?parseFloat(this.product.finalPrice):0}get totalStock(){return this.product?.productVariants?.reduce((t,l)=>t+l.stockQuantity,0)||0}get variants(){return this.product?.productVariants||[]}get cartItemPrice(){return this.finalPrice+(this.selectedVariant?parseFloat(this.selectedVariant.priceAdjustment):0)}getAdjustment(t){return parseFloat(t.priceAdjustment)}decreaseQty(){this.quantity=Math.max(1,this.quantity-1)}increaseQty(){this.quantity=Math.min(this.selectedVariant?.stockQuantity||10,this.quantity+1)}loadProduct(){return T(this,null,function*(){try{this.product=yield this.api.getProductBySlug(this.slug),this.selectedVariant=this.product?.productVariants?.[0]||null}catch{this.product=null}finally{this.loading=!1}})}handleAddToCart(){return T(this,null,function*(){if(this.selectedVariant){if(!this.auth.getToken()){this.router.navigate(["/login"],{queryParams:{redirect:`/products/${this.slug}`}});return}this.addingToCart=!0,this.message=null;try{let t=yield this.auth.getMe();yield this.api.addToCart(t.id,this.selectedVariant.id,this.quantity),this.message={type:"success",text:this.translate.instant("CMS_PRODUCT_DETAIL.ADDED_SUCCESS")},setTimeout(()=>this.message=null,3e3)}catch{this.message={type:"error",text:this.translate.instant("CMS_PRODUCT_DETAIL.ADD_ERROR")}}finally{this.addingToCart=!1}}})}static \u0275fac=function(l){return new(l||e)(f(j),f(U),f(V),f(O))};static \u0275cmp=I({type:e,selectors:[["app-product-detail"]],inputs:{slug:"slug"},decls:3,vars:1,consts:[[1,"min-h-screen","pt-28",2,"background","var(--bg-primary)"],[1,"min-h-screen","flex","items-center","justify-center",2,"background","var(--bg-primary)"],[1,"min-h-screen","pt-28","pb-20",2,"background","var(--bg-primary)"],[1,"container-narrow"],[1,"animate-glow-pulse"],[1,"h-4","rounded-full","w-48","mb-8",2,"background","var(--glass-bg-strong)"],[1,"glass-card","rounded-2xl","overflow-hidden"],[1,"grid","grid-cols-1","lg:grid-cols-2"],[1,"aspect-square",2,"background","var(--bg-tertiary)"],[1,"p-8","space-y-4"],[1,"h-4","rounded-full","w-24",2,"background","var(--glass-bg-strong)"],[1,"h-8","rounded-full","w-3/4",2,"background","var(--glass-bg-strong)"],[1,"h-6","rounded-full","w-32",2,"background","var(--glass-bg-strong)"],[1,"text-center"],[1,"text-2xl","font-semibold","text-white","mb-2"],["routerLink","/products",1,"btn-primary","inline-block","mt-4","px-6","py-3","rounded-xl"],[1,"text-sm","mb-8"],[1,"flex","items-center","space-x-2"],["routerLink","/",1,"text-[var(--text-tertiary)]","hover:text-white","transition-colors"],[1,"text-[var(--text-muted)]"],["routerLink","/products",1,"text-[var(--text-tertiary)]","hover:text-white","transition-colors"],[1,"text-white","font-medium"],[1,"aspect-square","flex","items-center","justify-center","border-b","lg:border-b-0","lg:border-r","border-white/[0.06]",2,"background","var(--bg-tertiary)"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-32","h-32","text-[var(--text-muted)]","opacity-30"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"p-8","lg:p-10"],[1,"text-sm","font-medium","uppercase","tracking-wider","text-[var(--accent-cyan)]","mb-2"],[1,"text-2xl","lg:text-3xl","font-bold","text-white","mb-4"],[1,"flex","items-center","gap-3","mb-6"],[1,"text-3xl","font-bold","text-white"],[1,"mb-6"],[1,"inline-flex","items-center","gap-1.5","text-sm","text-emerald-400","glass-subtle","px-3","py-1.5","rounded-full"],[1,"inline-flex","items-center","gap-1.5","text-sm","text-red-400","glass-subtle","px-3","py-1.5","rounded-full"],[1,"text-[var(--text-secondary)]","leading-relaxed","mb-8"],[1,"border-t","border-white/[0.06]","pt-6","space-y-5"],[1,"border-t","border-white/[0.06]","pt-6","mt-6"],[1,"mt-8","glass-card","rounded-2xl","p-8"],[1,"text-lg","text-[var(--text-muted)]","line-through"],[1,"px-2.5","py-1","rounded-full","text-xs","font-semibold","bg-gradient-to-r","from-cyan-400","to-blue-500","text-white"],[1,"w-1.5","h-1.5","bg-emerald-400","rounded-full","animate-glow-pulse"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"block","text-sm","font-medium","text-[var(--text-secondary)]","mb-2"],[1,"inline-flex","items-center","glass","rounded-xl","overflow-hidden"],[1,"px-4","py-2.5","text-[var(--text-secondary)]","hover:text-white","hover:bg-white/[0.06]","transition-colors","font-medium",3,"click"],[1,"px-5","py-2.5","border-x","border-white/[0.06]","text-white","font-medium","min-w-[3rem]","text-center"],[1,"py-4","border-t","border-white/[0.06]"],[1,"flex","items-center","justify-between"],[1,"text-[var(--text-secondary)]"],[1,"text-2xl","font-bold","text-white"],[1,"w-full","btn-primary","py-4","px-6","rounded-xl","text-base","font-semibold","flex","items-center","justify-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[3,"class"],[1,"flex","flex-wrap","gap-2"],[3,"disabled","class"],[3,"click","disabled"],[1,"text-xs","ml-1","opacity-75"],["viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4","fill","none",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-sm","text-[var(--text-secondary)]"],[1,"text-[var(--accent-cyan)]","hover:text-cyan-300","font-medium","transition-colors",3,"routerLink"],[1,"text-lg","font-semibold","text-white","mb-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],[1,"flex","flex-col","glass-subtle","rounded-xl","p-4"],[1,"text-sm","text-[var(--text-tertiary)]","mb-1"]],template:function(l,u){l&1&&_(0,Q,11,0,"div",0)(1,G,8,6,"div",1)(2,ot,40,16,"div",2),l&2&&x(u.loading?0:u.product?2:1)},dependencies:[M,L,F,B,R],encapsulation:2})}return e})();export{_t as ProductDetailComponent};
